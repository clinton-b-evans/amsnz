{% extends "base.html" %}
{% load static %}
{% load mathfilters %}

{% block title %}
Year To Date {{ year }}
{% endblock title %}

{% block content %}
<script language="javascript" type="text/javascript">

  function popitup(url) {
    newwindow = window.open(url, '{{title}}', 'height=510,width=384');
    if (window.focus) { newwindow.focus() }
    return false;
  }

</script>

<!-- <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script> -->

<!-- <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script> -->

<<<<<<< HEAD
<!-- Google Chart -->
<script src="{% static 'GoogleChart/Gchart.js' %}"></script>

<!-- <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script> -->

=======
>>>>>>> 0127d506919697f956a3d13630c260526086819d
<div class="row">
  <div class="col-lg-3">
    <select class="form-control mb-3" onchange="location = this.value;">
      <option selected="" value="" disabled>Select year</option>

      {% for year in years_list%}
      <option value="../{{year|stringformat:"i"}}">{{year|stringformat:"i"}}</option>
      {%endfor%}
    </select>
  </div>

  <div class="col-lg-4">
    <form class="form-group" action="/propertyincomestatements/yeartodate/{{year}}/" method="get">
      <div class="row">
        <div class="col-9 select2-purple mb-2">
          <select name="properties" id="properties" class="select2" multiple="multiple" data-placeholder="Select properties"
            data-dropdown-css-class="select2-purple" style="width: 100%;">
            {% for obj in prop_qs %}
            <option value="{{ obj.pk }} ">{{ obj.name }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-3">
          <button class="btn btn-info" type="submit" value="Submit">Filter</button>
        </div>
      </div>
    </form>
  </div>
<div class="chart-container mt-5" style="position: relative;">
  <div class="row justify-content-around">
    
    <div class="col-8 bg-light p-4 shadow">
      <table class="table table-hover" style="font-size:small">
        <thead>
          <tr>
            <th>YEAR - {{year}}</th>
            <th scope="col">Jan</th>
            <th scope="col">Feb</th>
            <th scope="col">Mar</th>
            <th scope="col">Apr</th>
            <th scope="col">May</th>
            <th scope="col">Jun</th>
            <th scope="col">Jul</th>
            <th scope="col">Aug</th>
            <th scope="col">Sep</th>
            <th scope="col">Oct</th>
            <th scope="col">Nov</th>
            <th scope="col">Dec</th>
            <th scope="col">Total</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="col">INCOME</th>
          </tr>
          <tr>
            <td scope="row">Job</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
          </tr>
          <tr>
            <td scope="row">Rent Received</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
          </tr>
          <tr>
          <thead>
            <tr>
              <th scope="row">Total</th>
              <td>$0</td>
              <td>$0</td>
              <td>$0</td>
              <td>$0</td>
              <td>$0</td>
              <td>$0</td>
              <td>$0</td>
              <td>$0</td>
              <td>$0</td>
              <td>$0</td>
              <td>$0</td>
              <td>$0</td>
              <td>$0</td>
            </tr>
          </thead>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <th scope="col">EXPENSES</th>
          </tr>
          <tr>
            <td scope="row">Maintenance</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
          </tr>
          <tr>
            <td scope="row">Rent</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
          </tr>
          <tr>
            <td scope="row">Rates</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
          </tr>
          <tr>
            <td scope="row">Commission</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
          </tr>
          <tr>
            <td scope="row">Accountant</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
          </tr>
          <tr>
            <td scope="row">Fees</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
          </tr>
          <tr>
            <td scope="row">Sundry Expense</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
          </tr>
          <tr>
            <td scope="row">Lawns</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
          </tr>
          <tr>
            <td scope="row">Electrical</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
          </tr>
          <tr>
            <td scope="row">Plumbing</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
          </tr>
          <tr>
            <td scope="row">Paydown</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
          </tr>
          <tr>
            <td scope="row">Tsb</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
            <td>$0</td>
          </tr>
          <thead>
            <tr style="background-color: #ededed">
            <th scope="row">Total</th>
            {% for k, v in month_expenses.items %}
              <td><b>${{v}}</b></td>
            {% endfor %}
            </tr>
          </thead>
        </tbody>
      </table>
    </div>

<<<<<<< HEAD
    <div class="col-3">
      <!-- <div align="center" class="mb-3">
        <h5>Expenses</h5>
        <canvas id="myChart" width="300px" height="300px"></canvas>
      </div> -->

      <!-- <div class="col p-2 bd-highlight">   -->
        <div id="donutchart" class="mb-3 shadow" style="width: 100%; height: 400px;"></div>  
      <!-- </div> -->

      <!-- <div align="center">
        <h5>Income Vs Expense</h5>
        <canvas id="pieChart" width="30px" height="30px"></canvas>
      </div> -->

      <div id="piechart" class="mb-3 shadow" style="width: 100%; height: 400px;"></div> 

=======
      <canvas id="pieChart" width="50px" height="50px"></canvas>
      <script>
        document.addEventListener("DOMContentLoaded", () => {
          new Chart(document.querySelector('#pieChart'), {
            type: 'pie',
            data: {
              labels: [
                'Income',
                'Expence',
                // 'Yellow'
              ],
              datasets: [{
                label: 'My First Dataset',
                data: [{{income|stringformat:"i"}}, {{expense|stringformat:"i"}}],
                backgroundColor: [
                  'rgb(255, 99, 132)',
                  'rgb(54, 162, 235)',
                  // 'rgb(255, 205, 86)'
                ],
                hoverOffset: 4
              }]
            }
          });
        });
      </script>
>>>>>>> 0127d506919697f956a3d13630c260526086819d
    </div>

  </div>
</div>
<<<<<<< HEAD
=======
</div>
>>>>>>> 0127d506919697f956a3d13630c260526086819d

<script>
  $(function () {
    //Initialize Select2 Elements
    $('.select2').select2()
  })
</script>

<!-- <script>
  document.addEventListener("DOMContentLoaded", () => {
    new Chart(document.querySelector('#pieChart'), {
      type: 'pie',
      data: {
        labels: [
          'Income',
          'Expence',
          // 'Yellow'
        ],
        datasets: [{
          label: 'My First Dataset',
          data: [300, 200],
          backgroundColor: [
            'rgb(255, 99, 132)',
            'rgb(54, 162, 235)',
            // 'rgb(255, 205, 86)'
          ],
          hoverOffset: 4
        }]
      },
      options: {
        plugins: {
          legend: {
            position: 'bottom',
            align: 'left',
          },
        },
      }
    });
  });
</script>

<script>
  const ctx = document.getElementById('myChart');
  const myChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: [
<<<<<<< HEAD
        {% for key, value in categories_yearly.items %} 
        '{{key}}',
        {% endfor %}
=======
        {% for key, value in categories_yearly.items %}
        '{{key}}',
{% endfor %}
        ],
  datasets: [{
    label: 'Categories',
    data: [
      {% for key, value in categories_yearly.items %}
        '{{value|stringformat:"i"}}',
  {% endfor %}
  ],
    backgroundColor: [
      'rgba(255, 99, 132, 0.2)',
      'rgba(54, 162, 235, 0.2)',
      'rgba(255, 206, 86, 0.2)',
      'rgba(75, 192, 192, 0.2)',
      'rgba(153, 102, 255, 0.2)',
      'rgba(255, 159, 64, 0.2)'
    ],
      borderColor: [
        'rgba(255, 99, 132, 1)',
        'rgba(54, 162, 235, 1)',
        'rgba(255, 206, 86, 1)',
        'rgba(75, 192, 192, 1)',
        'rgba(153, 102, 255, 1)',
        'rgba(255, 159, 64, 1)'
>>>>>>> 0127d506919697f956a3d13630c260526086819d
      ],
      datasets: [{
        label: 'Categories',
        data: [
          {% for key, value in categories_yearly.items %} 
          '{{value|stringformat:"i"}}',
          {% endfor %}
        ],
        backgroundColor: [
          'rgba(255, 99, 132, 0.2)',
          'rgba(54, 162, 235, 0.2)',
          'rgba(255, 206, 86, 0.2)',
          'rgba(75, 192, 192, 0.2)',
          'rgba(153, 102, 255, 0.2)',
          'rgba(255, 159, 64, 0.2)'
        ],
        borderColor: [
          'rgba(255, 99, 132, 1)',
          'rgba(54, 162, 235, 1)',
          'rgba(255, 206, 86, 1)',
          'rgba(75, 192, 192, 1)',
          'rgba(153, 102, 255, 1)',
          'rgba(255, 159, 64, 1)'
        ],
        borderWidth: 1
      }]
    },
    options: {
      plugins: {
        legend: {
          position: 'bottom',
          align: 'left',
        },
      },
    }
  });
</script> -->

<script type="text/javascript">
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {

    var data = google.visualization.arrayToDataTable([
      ['Task', 'Hours per Day'],
      ['Work',     11],
      ['Eat',      2],
      ['Commute',  2],
      ['Watch TV', 2],
      ['Sleep',    7]
    ]);

    var options = {
      title: 'All Expenses',
      // is3D: true,
      pieHole: 0.4,
      // legend: 'none',
      // pieSliceText: 'label',
      legend: {position: 'bottom', alignment: 'start'}
    };

    var chart = new google.visualization.PieChart(document.getElementById('donutchart'));

    chart.draw(data, options);
  }
</script>

<<<<<<< HEAD
<script type="text/javascript">
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {

    var data = google.visualization.arrayToDataTable([
      ['Task', 'Hours per Day'],
      ['Income',     {{income|stringformat:"i"}}],
      ['Expense',    {{expense|stringformat:"i"}}]
    ]);

    var options = {
      title: 'Income Vs Expense',
      // is3D: true,
      // pieHole: 0.4,
      // legend: 'none',
      // pieSliceText: 'label',
      legend: {position: 'bottom', alignment: 'center'}
    };

    var chart = new google.visualization.PieChart(document.getElementById('piechart'));

    chart.draw(data, options);
  }
</script>


=======
>>>>>>> 0127d506919697f956a3d13630c260526086819d
<br>

{% endblock content %}